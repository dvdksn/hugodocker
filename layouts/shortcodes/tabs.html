{{ with .Inner }}{{/* don't do anything, just call it */}}{{ end }}
{{ $default := (index (.Scratch.Get "tabs") 0).name }}
{{ $group := .Get "group" }}

{{ $names := slice }}
{{ range (.Scratch.Get "tabs") }}
  {{ $names = $names | append .name }}
{{ end }}
{{ $names = delimit $names " " }}


<div
  x-data="{ selected: '{{ $default }}' }"
  {{ with $group }}
    @tab-select.window="$event.detail.group === '{{ . }}' ? selected =
    $event.detail.name : null"
  {{ end }}
  aria-role="tabpanel"
>
  <div
    aria-role="tablist"
    class="space-x-2 border-divider-light border-b-2 my-4 dark:border-divider-dark"
  >
    {{ range (.Scratch.Get "tabs") }}
      <button
        class="p-1"
        :class="selected === '{{ .name }}' &&
          'border-blue-light-500 border-b-4 dark:border-b-blue-dark-600'"
        {{ if $group }}
          @click="$dispatch('tab-select', { group: '{{ $group }}', name:
          '{{ .name }}'})"
        {{ else }}
          @click="selected = '{{ .name }}'"
        {{ end }}
      >
        {{ .name }}
      </button>
    {{ end }}
  </div>
  <div>
    {{ range (.Scratch.Get "tabs") }}
      <div
        class="prose max-w-none dark:prose-invert"
        aria-role="tab"
        :class="selected !== '{{ .name }}' && 'hidden'"
      >
        {{ .content | $.Page.RenderString (dict "display" "block") }}
      </div>
    {{ end }}
  </div>
</div>
